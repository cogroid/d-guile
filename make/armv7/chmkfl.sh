#!/bin/bash

sed -i 's/$(AM_V_CCLD)$(libguile_2.2_la_LINK) -rpath $(libdir) $(libguile_2.2_la_OBJECTS) $(libguile_2.2_la_LIBADD) $(LIBS)/arm-linux-androideabi-gcc -std=gnu11 -shared   .libs\/libguile_2.2_la-alist.o .libs\/libguile_2.2_la-array-handle.o .libs\/libguile_2.2_la-array-map.o .libs\/libguile_2.2_la-arrays.o .libs\/libguile_2.2_la-async.o .libs\/libguile_2.2_la-atomic.o .libs\/libguile_2.2_la-backtrace.o .libs\/libguile_2.2_la-boolean.o .libs\/libguile_2.2_la-bitvectors.o .libs\/libguile_2.2_la-bytevectors.o .libs\/libguile_2.2_la-chars.o .libs\/libguile_2.2_la-control.o .libs\/libguile_2.2_la-continuations.o .libs\/libguile_2.2_la-debug.o .libs\/libguile_2.2_la-deprecated.o .libs\/libguile_2.2_la-deprecation.o .libs\/libguile_2.2_la-dynstack.o .libs\/libguile_2.2_la-dynwind.o .libs\/libguile_2.2_la-eq.o .libs\/libguile_2.2_la-error.o .libs\/libguile_2.2_la-eval.o .libs\/libguile_2.2_la-evalext.o .libs\/libguile_2.2_la-expand.o .libs\/libguile_2.2_la-extensions.o .libs\/libguile_2.2_la-fdes-finalizers.o .libs\/libguile_2.2_la-feature.o .libs\/libguile_2.2_la-filesys.o .libs\/libguile_2.2_la-finalizers.o .libs\/libguile_2.2_la-fluids.o .libs\/libguile_2.2_la-foreign.o .libs\/libguile_2.2_la-foreign-object.o .libs\/libguile_2.2_la-fports.o .libs\/libguile_2.2_la-frames.o .libs\/libguile_2.2_la-gc-malloc.o .libs\/libguile_2.2_la-gc.o .libs\/libguile_2.2_la-gettext.o .libs\/libguile_2.2_la-generalized-arrays.o .libs\/libguile_2.2_la-generalized-vectors.o .libs\/libguile_2.2_la-goops.o .libs\/libguile_2.2_la-gsubr.o .libs\/libguile_2.2_la-guardians.o .libs\/libguile_2.2_la-hash.o .libs\/libguile_2.2_la-hashtab.o .libs\/libguile_2.2_la-hooks.o .libs\/libguile_2.2_la-i18n.o .libs\/libguile_2.2_la-init.o .libs\/libguile_2.2_la-inline.o .libs\/libguile_2.2_la-instructions.o .libs\/libguile_2.2_la-ioext.o .libs\/libguile_2.2_la-keywords.o .libs\/libguile_2.2_la-list.o .libs\/libguile_2.2_la-load.o .libs\/libguile_2.2_la-loader.o .libs\/libguile_2.2_la-macros.o .libs\/libguile_2.2_la-mallocs.o .libs\/libguile_2.2_la-memoize.o .libs\/libguile_2.2_la-modules.o .libs\/libguile_2.2_la-null-threads.o .libs\/libguile_2.2_la-numbers.o .libs\/libguile_2.2_la-objprop.o .libs\/libguile_2.2_la-options.o .libs\/libguile_2.2_la-pairs.o .libs\/libguile_2.2_la-poll.o .libs\/libguile_2.2_la-ports.o .libs\/libguile_2.2_la-print.o .libs\/libguile_2.2_la-procprop.o .libs\/libguile_2.2_la-procs.o .libs\/libguile_2.2_la-programs.o .libs\/libguile_2.2_la-promises.o .libs\/libguile_2.2_la-r6rs-ports.o .libs\/libguile_2.2_la-random.o .libs\/libguile_2.2_la-rdelim.o .libs\/libguile_2.2_la-read.o .libs\/libguile_2.2_la-rw.o .libs\/libguile_2.2_la-scmsigs.o .libs\/libguile_2.2_la-script.o .libs\/libguile_2.2_la-simpos.o .libs\/libguile_2.2_la-smob.o .libs\/libguile_2.2_la-sort.o .libs\/libguile_2.2_la-srcprop.o .libs\/libguile_2.2_la-srfi-1.o .libs\/libguile_2.2_la-srfi-4.o .libs\/libguile_2.2_la-srfi-13.o .libs\/libguile_2.2_la-srfi-14.o .libs\/libguile_2.2_la-srfi-60.o .libs\/libguile_2.2_la-stackchk.o .libs\/libguile_2.2_la-stacks.o .libs\/libguile_2.2_la-stime.o .libs\/libguile_2.2_la-strings.o .libs\/libguile_2.2_la-strorder.o .libs\/libguile_2.2_la-strports.o .libs\/libguile_2.2_la-struct.o .libs\/libguile_2.2_la-symbols.o .libs\/libguile_2.2_la-syntax.o .libs\/libguile_2.2_la-threads.o .libs\/libguile_2.2_la-throw.o .libs\/libguile_2.2_la-trees.o .libs\/libguile_2.2_la-unicode.o .libs\/libguile_2.2_la-uniform.o .libs\/libguile_2.2_la-values.o .libs\/libguile_2.2_la-variable.o .libs\/libguile_2.2_la-vectors.o .libs\/libguile_2.2_la-version.o .libs\/libguile_2.2_la-vm.o .libs\/libguile_2.2_la-vports.o .libs\/libguile_2.2_la-weak-set.o .libs\/libguile_2.2_la-weak-table.o .libs\/libguile_2.2_la-weak-vector.o .libs\/libguile_2.2_la-dynl.o .libs\/libguile_2.2_la-posix.o .libs\/libguile_2.2_la-net_db.o .libs\/libguile_2.2_la-socket.o .libs\/libguile_2.2_la-regex-posix.o   -Wl,--whole-archive ..\/lib\/.libs\/libgnu.a -Wl,--no-whole-archive  -L\/home\/cogroid\/local\/libunistring\/armv7\/lib -L\/home\/cogroid\/local\/libgmp\/armv7\/lib -L\/home\/cogroid\/local\/libtool\/armv7\/lib -L\/home\/cogroid\/local\/libunistring\/armv7\/lib -L\/home\/cogroid\/local\/libffi\/armv7\/lib -L\/home\/cogroid\/local\/libgmp\/armv7\/lib -L\/home\/cogroid\/local\/libtool\/armv7\/lib -L\/home\/cogroid\/local\/android-ndk-r18b\/platforms\/android-24\/arch-arm\/usr\/lib -L\/home\/cogroid\/local\/android-ndk-r18b\/toolchains\/arm-linux-androideabi-4.9\/prebuilt\/linux-x86_64\/lib\/gcc\/arm-linux-androideabi\/4.9.x\/armv7-a\/thumb -L\/home\/cogroid\/local\/guile\/armv7\/lib -B\/home\/cogroid\/local\/guile\/armv7\/lib  -B\/home\/cogroid\/local\/android-ndk-r18b\/platforms\/android-24\/arch-arm\/usr\/lib -B\/home\/cogroid\/local\/android-ndk-r18b\/toolchains\/arm-linux-androideabi-4.9\/prebuilt\/linux-x86_64\/lib\/gcc\/arm-linux-androideabi\/4.9.x\/armv7-a\/thumb  -lgc -lfixing -lffi -lunistring -lgmp -lltdl -lm  -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -mthumb --sysroot \/home\/cogroid\/local\/android-ndk-r18b\/sysroot -fstack-protector-strong -O2 -Wl,-z -Wl,relro -Wl,--version-script=.\/libguile.map -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -mthumb --sysroot \/home\/cogroid\/local\/android-ndk-r18b\/sysroot -fstack-protector-strong -O2   -Wl,-soname -Wl,libguile-2.2.so -o .libs\/libguile-2.2.so/g' ./libguile/Makefile

sed -i 's/guile_DEPENDENCIES = libguile-2.2.la/guile_DEPENDENCIES = .\/.libs\/libguile-2.2.so/g' ./libguile/Makefile

sed -i 's/guile_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS)/guile_LINK = echo "$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS)/g' ./libguile/Makefile

sed -i 's/\t$(guile_LDFLAGS) $(LDFLAGS) -o $@/\t    $(guile_LDFLAGS) $(LDFLAGS) -o $@"/g' ./libguile/Makefile

sed -i 's/am__DEPENDENCIES_2 = ${top_builddir}\/libguile\/libguile-2.2.la \\/am__DEPENDENCIES_2 = \\/g' ./test-suite/standalone/Makefile

sed -i 's/libtest_asmobs_la_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC/libtest_asmobs_la_LINK = echo "$(LIBTOOL) $(AM_V_lt) --tag=CC/g' ./test-suite/standalone/Makefile

sed -i 's/\t$(libtest_asmobs_la_LDFLAGS) $(LDFLAGS) -o $@/\t    $(libtest_asmobs_la_LDFLAGS) $(LDFLAGS) -o $@"/g' ./test-suite/standalone/Makefile

sed -i 's/libtest_ffi_la_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC/libtest_ffi_la_LINK = echo "$(LIBTOOL) $(AM_V_lt) --tag=CC/g' ./test-suite/standalone/Makefile

sed -i '0,/\t$(LDFLAGS) -o $@"/{s/\t$(LDFLAGS) -o $@"/\t$(LDFLAGS) -o $@/}' ./test-suite/standalone/Makefile

sed -i '0,/\t$(LDFLAGS) -o $@/{s/\t$(LDFLAGS) -o $@/\t$(LDFLAGS) -o $@"/}' ./test-suite/standalone/Makefile

sed -i 's/libtest_extensions_la_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC/libtest_extensions_la_LINK = echo "$(LIBTOOL) $(AM_V_lt) --tag=CC/g' ./test-suite/standalone/Makefile

sed -i 's/\t$(libtest_extensions_la_LDFLAGS) $(LDFLAGS) -o $@/\t    $(libtest_extensions_la_LDFLAGS) $(LDFLAGS) -o $@"/g' ./test-suite/standalone/Makefile

sed -i 's/GOBJECTS =/GOBJECTS =\n#GOBJECTS =/g' ./module/Makefile

sed -i 's/SOURCES =/SOURCES =\nSOURCES_OLD =/g' ./module/Makefile

sed -i 's/SOURCES =/SOURCES =\nSOURCES_OLD =/g' ./bootstrap/Makefile
